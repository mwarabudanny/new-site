
var data = [
     /*{"name":"",
        "type":"",
        "area":"",
        "details":" ",
        "img": "",
        "url":"",
        "tel":"",
        "age":"",
        "ambiance":"",
        "hours":"",
        "email": "", 
        "address": ""},*/
        {"name":"cuba",
        "type":"pub / lounge",
        "area":"Masabalala Yengwa Avenue",
        "details":" ",
        "img": "http://www.finditfaster.co.za/wp-content/uploads/2013/08/1272_535663659803150_1766949151_n.jpg",
        "url":"",
        "tel":"0313036364",
        "age":"",
        "ambiance":"",
        "hours":"9AM to 6AM",
        "email": "", 
        "address": "Shop No.12, Moses Mabhida Stadium, Masabalala Yengwa Avenue, Kwa-zulu Natal, Durban, 4001"},
        {"name":"casa nostra",
        "type":"Club",
        "area":"Berea",
        "details":" ",
        "img": "http://www.durbanlive.com/userimages/club_casa_nostra.jpg",
        "url":"",
        "tel":" 031 303 8836",
        "age":"",
        "ambiance":"",
        "hours":"9PM-12AM",
        "email": "", 
        "address": " 672 Umgeni Rd, Windermere, Berea, 4001"},
        {"name":"Raffles",
        "type":"Club",
        "area":"Umhlanga",
        "details":"Raffles is a premier and popular nightclub in the Durban nightclub scene set in the heart of Umhlanga. Under new management we aim to provide our clientele with an unforgettable experience! On entering the club you would swear you had been transported to Las Vegas, the decor is dynamic with chrome and black leather with a VIP Room that is unrivaled.",
        "img": "https://vizzot.co.za/assets/uploads/listing/summary/listing-raffles-nite-club36088.jpg",
        "url":"",
        "tel":"",
        "age":"",
        "ambiance":"",
        "hours":"everyday 9PM to 4AM",
        "email": "", 
        "address": "McCausland Cres, Umhlanga, Durban, 4001"},
        {"name":"Fahrenheit",
        "type":"Club",
        "area":"Berea",
        "details":" ",
        "img": "https://lh3.googleusercontent.com/6yGn7SOIRMAu3U1d3KXxi1mzL6MVWvw-e1NmStNGg57HYzbWXzLGp--UnayCAF1-mai15jZwkAFaQ6IWEzpOklck",
        "url":"",
        "tel":" 084 246 8029",
        "age":"21",
        "ambiance":"",
        "hours":"fri & sat 9PM to 5AM",
        "email": "", 
        "address": " 226 Mathews Meyiwa Rd, Berea, Durban, 4001"},
        {"name":"Absolute Florida",
        "type":"Club",
        "area":"Windermere",
        "details":"Absolute redefines velvet rope laid back exclusivity, positioning itself as the flagship for all things fabulous in Durbans high-end party scene. The drinks, the dance, DJs, and the special events all make for a night at Absolute unlike any other.",
        "img": "http://showme.co.za/durban/files/2011/11/f4enNXsT.jpg",
        "url":"https://www.facebook.com/Absolute-436585703120885/",
        "tel":" 0828937596",
        "age":"21",
        //"ambiance":"",
        "hours":"Mon to Sat 8PM to 4AM",
        "email": "", 
        "address": "258 Florida Rd, Windermere, Durban, 4001"},
        {"name":"Billy the Bum’s",
        "type":"Bar & Night Club",
        "area":"Morningside",
        "details":"Sexy…Sporty…Trendy…Fresh. If you’re looking for an insatiable way to spend an evening and to bump up your social calendar Billy the B.U.M’s ",
        "img":"https://www.legacylifestyle.co.za/images/affiliates_logos/dddUD-Logo_Billy-the-bums-300x300Black.jpg",
        "url":"",
        "tel":"+27(0)313031988",
        "age":"n/a",
        "ambiance":"n/a",
        "hours":"n/a",
        "email": "", 
        "address": "504 Lilian Ngoyi Morningside  Durban"},
        {"name":"BLVD",
        "type":"Club",
        "area":"Morningside",
        "details":" Events & Entertainment | Morningside",
        "img": "https://pbs.twimg.com/profile_images/1758582947/BLVD_Logo.jpg",
        "url":"velvetlounge.co.za",
        "tel":" +27(0)313037631",
        "age":"n/a",
        "ambiance":"n/a",
        "hours":"n/a",
        "email": "", 
        "address": " 153 Florida Road | Morningside | Durban"},
        {"name":"Club Altitude",
        "type":"Club",
        "area":"Morningside",
        "details":" Durban'st new trendy cosmopolitan pub/night club for the Gays/anyone different and fabulous.",
        "img":"https://scontent.fjnb4-1.fna.fbcdn.net/v/t1.0-1/c5.0.200.200/p200x200/13466272_1037424259675342_8496351317637834855_n.jpg?oh=b9f08493c845af26e2190d792609711d&oe=59CF4164",
        "url":"",
        "tel":"",
        "age":"n/a",
        "ambiance":"n/a",
        "hours":"n/a",
        "email": "", 
        "address": " 25 Silver Avenue, Stamford Hill, Morningside, Durban | Morningside | Durban"},
        {"name":"Bertoua",
        "type":"Cafe & Lounge",
        "area":"Musgrave",
        "details":"Bertoua's sumptuous décor is complimented with a bold and innovative menu, providing a unique cosmopolitan dining experience, inspired by the flavours and cultures of the world. Bertoua is open from 11am to 2am every day and offers informal coffees, a la carte lunches through to a formal dining and a late night menu.",
        "img": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSrRfZfVtrFyuOLVXBVtPCJJtMaSsAiSzep82IROPA_HHaXUsa1",
        "url":"",
        "tel":"031 8281979",
        "age":"unknown",
        "ambiance":"n/a",
        "hours":"9 AM to 2 AM",
       //"email": "", 
        "address": "115 Musgrave Road, Musgrave, Durban"},
        {"name":"Porter's",
        "type":"Lounge & Bar",
        "area":" Glenashley",
        "details":"Porter's prides themselves on always being lively and in the game.This modern and bustling, blue-accented bar / Lounge offers Mediterranean cuisine, plus ocean views.",
        "img": "http://www.porters031.co.za/assets/imgs/logo3.png",
        "url":"",
        "tel":"031 5723152",
        //"age":"n/a",
        //"ambiance":"n/a",
        "hours":"12 Noon to 12 Midnight (Mon-Sun)",
        "email": "melanie@porters031.co.za", 
        "address": "36 Newport Avenue, Glenashley, 4051 Durban North"},
        {"name":"The orgin",
        "type":"Night Club",
        "area":"Berea",
        "details":"Set across 3 floors in the historic Winston Hotel, Origin is an entertainment wonderland featuring 5 dance floors, numerous bars and lounges, chillout areas, and a rooftop terrace. The interior design is influenced by the latest trends and styles coming straight out of the best clubs in places like Ibiza, New York, London, Paris.",
        "img": "http://static.wixstatic.com/media/3a32fe_f2d8913d398743bf9b8cffb5a7647f23.png_srz_600_498_85_22_0.50_1.20_0.00_png_srz",
        "url":"http://www.theorigin.co.za/",
        "tel":" 031 201 9959",
        "age":"21",
        "ambiance":"n/a",
        "hours":"Saturday from 8:30pm to 6:00 AM ",
        "email": "", 
        "address": "4083, 9 Clark Rd, Bulwer, Berea, 4083"},
        {"name":"ROCCA BAR",
        "type":"Club / Bar",
        "area":"Durban Central",
        //"details":" ",
        "img": "http://www.durbanlive.com/userimages/Rocca(2).jpg",
        "url":"http://roccabar.co.za/",
        "tel":" 082 561 8889",
        "age":"21",
       // "ambiance":"",
        //"hours":"",
        "email": "", 
        "address": "Ballance Rd, Durban Central, Durban, 4001"},
        {"name":"Cape to ciaro",
        "type":"Club",
        "area":"Point Waterfront ",
        "details":"Cape 2 Cairo is truly South Africa's only mega nightclub with, 5 signature dance floors, 8 resident Dj's and an experience that is unmatched.This exciting and popular venue is the current holder of the best nightclub in KZN (South Africa) as conducted by a regional media survey annually and has held this title for six years in succession.Cape 2 Cairo is a must visit venue",
        "img": "https://scontent.cdninstagram.com/t51.2885-19/s150x150/11351751_898018283621654_1090996126_a.jpg",
        "url":"http://www.cape2caironiteclub.com/",
        "tel":"031 368 3517",
        "age":"21",
        //"ambiance":"n/a",
        "hours":"Friday, saturday 9PM to 6AM",
        "email": "info@cape2caironiteclub.com", 
        "address": "100 Mahatma Gandhi Road (Point Road), Point Waterfront - Durban"},
        {"name":"Joe Cools",
        "type":"Night Club",
        "area":"Durban Central",
        "details":"The Legendary Joe Cool's is back .... better than ever before!",
        "img": "http://www.finditfaster.co.za/wp-content/uploads/2013/07/JoeCoolsDurbanLogo.gif",
        "url":"https://www.facebook.com/joecoolsdurban/",
        "tel":" 082 378 8068",
        "age":"21",
       // "ambiance":"n/a",
        "hours":"everyday 8AM to 5AM",
        //"email": "", 
        "address": " 137 O R Tambo Parade, Durban Central, Durban, 4001"},
        {"name":"Cubana",
        "type":"Lounge / Club",
        "area":"Windermere",
        "details":"Clubby Latino bar chain with a Cuban soundtrack, offering cocktails, cigars and a simple menu.",
        "img": "http://www.pevibes.co.za/wp-content/uploads/2013/03/IMG_1355.jpg",
        "url":"",
        "tel":"031 303 4383",
        //"age":"n/a",
        //"ambiance":"n/a",
        "hours":"Everyday from 7AM to 2AM",
        "email": "", 
        "address": "128 Florida Rd, Windermere, Durban, 4001"},
        {"name":"tiger tiger",
        "type":"Club",
        "area":"Morningside",
        "details":"Tiger Tiger is the perfect night spot for party animals of all ages in the city of Durban. Regularly hosting some of the country’s most popular DJ’s and boasting themed parties, competitions, giveaways and drinks specials, Tiger Tiger is without doubt the most happening place to be.",
        "img": "http://www.tigertiger.co.za/wp-content/uploads/2016/07/TT-Durban-Highres.png",
        "url":"http://www.tigertiger.co.za/",
        "tel":" 0813887154",
        "age":"21",
        //"ambiance":"n/a",
        //"hours":"n/a",
        "email": "marketing.tigerdbn@outlook.com", 
        "address": "67 Isaiah Ntshangase Rd, Morningside, Durban, 4001"},
       
  ];

// this will make the list randomly 
data.sort(function(a, b){return Math.random()- 0.4});









//----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
$(document).on("pageinit", "#info-page", function () {


    //set up string for adding <li/>
    var li = "";

    var pathname = window.location.pathname; // Returns path only
    var url = window.location.href;     // Returns full URL

    console.log(pathname);
    console.log(url);
    
    //container for $li to be added
    $.each(data, function (i, data) {
        //add the <li> to "li" variable
        //note the use of += in the variable
        //meaning I'm adding to the existing data. not replacing it.
        //store index value in array as id of the <a> tag
       li  += '<li ><a href="#?id=1" id="' + i + '"  class="info-go" data-transition="flip" style="background:white;font-weight:600;color:grey;box-shadw:none" >' + '<img src="'+data.img+'"  width="80" height="80" style="background-color:whites;box-shadow:0px 1px 3px rgba(100,100,100,0.49);border-radius:40px;"/>' + data.name.charAt(0).toUpperCase() + data.name.slice(1) +'</p>'+'<p style="color:red;margin-top:-5px">'+data.type.toUpperCase()+"  " +data.area.charAt(0).toUpperCase() + data.area.slice(1)+'<p></li>'
    });
 
    //append list to ul
    $("#thelist").append(li).promise().done(function () {
        //wait for append to finish - thats why you use a promise()
        //done() will run after append is done
        //add the click event for the redirection to happen to #details-page
        $(this).on("click", ".info-go", function (e) {
            e.preventDefault();
            //store the information in the next page's data
            $("#details-page").data("info", data[this.id]);
            //change the page # to second page. 
            //Now the URL in the address bar will read index.html#details-page
            //where #details-page is the "id" of the second page
            //we're gonna redirect to that now using changePage() method
            $.mobile.changePage("#details-page");
        });

        //refresh list to enhance its styling.
        $(this).listview("refresh");
    });
});
//use pagebeforeshow
//DONT USE PAGEINIT! 
//the reason is you want this to happen every single time
//pageinit will happen only once
$(document).on("pagebeforeshow", "#details-page", function () {
    //get from data - you put this here when the "a" wa clicked in the previous page
    var data = $(this).data("info");
    //string to put HTML in
    
    var info_view = "";
 info_view += '<div >'
                    
                       +'<div  style="background:white;margin-top:-16px; font-weight:normal;box-shadow:1px 3px 5px 0px rgba(100,100,100,0.49) ;   border-radius:0px; border-top:none !important;" >'
                       +' <ul data-role="listview"  data-filter="true" data-icon="false" data-mini="true" data-input="#filterBasic-input" class="ui-nodisc-icon ui-alt-icon"  >'
                       + '<img src="'+data.img+'" align="middle" atl="" width="80" height="80" style="background-color:white;box-shadow:0px 1px 7px rgba(100,100,100,0.49);border-radius:40px"/>'
                       +" "+data.type+" "+ data.area+'<br>'
                       +'</div>'+'<br>'
                     
                       +'</ul>' 
                        +'<div class="ui-grid-c">'

                       //CALL
                       +'<div class="ui-block-d">'
                       + '<a href="tel:' + data.tel + '" class="ui-btn ui-icon-phone ui-btn-icon-left" style="width:10px;height:25px;border-radius:30px; background:#3b7a57">' + '</a>'+'<br>'
                       +'</div>'
                       //URL
                       +'<div class="ui-block-d">'
                       + '<a href="geo:' +data.url+ '" class="ui-btn ui-icon-info ui-btn-icon-left" style="background-position:center;display:block;width:10px;height:25px;border-radius:30px; background:purple">'+  '</a>'+'<br>'
                       +'</div>'
                       //EMAIL
                       +'<div class="ui-block-d">'
                       + '<a href="mailto:' + data.email + '" class="ui-btn ui-icon-mail ui-btn-icon-left" style="width:10px;height:25px;border-radius:30px; background:blue">'+  '</a>'+'<br>'
                       +'</div>'
                       //Map
                       +'<div class="ui-block-d">'
                       + '<a href="' + data.map + '" class="ui-btn ui-icon-location ui-btn-icon-left" style="width:10px;height:25px;border-radius:30px; background:red">'+  '</a>'+'<br>'
                       +'</div><br>'
                      // DETAILS and DESCRIPTION
                       +'<div class="ui-body" style="background:white;margin:0px 10px ; font-weight:normal;box-shadow:1px 3px 5px 0px rgba(100,100,100,0.49) ;   border-radius:0px; border-top:none !important;" >'
                       +'<p style="opacity:0.7;">' 
                       +'<b>'+data.name.toUpperCase()+'</b>'+ " "+ data.details+'</p>' +'</br></br>'+'</div>'+'</br>'

                         // MORE DETAILS
                       +'<div class="ui-body" style="background:white; font-weight:normal; box-shadow:1px 3px 5px 0px  rgba(100,100,100,0.49) ;   border-radius:0px;  ">'
                       +'<p >'+'<i style="color:purple">'+"Address: "+ '</i>'+data.address+'</p>'
                       +'<p >'+'<i style="color:purple">'+"Type:    "+ '</i>'+data.type.charAt(0).toUpperCase() + data.type.slice(1)+'</p>'
                       +'<p >'+'<i style="color:purple">'+"Ambiance: "+ '</i>'+data.ambiance+'</p>'
                       +'<p >'+'<i style="color:purple">'+"Hours: "+ '</i>'+data.hours+'</p>'
                       +'<p >'+'<i style="color:purple">'+"Age Resctriction: "+ '</i>'+data.age+'</p>'
                       +'<div>'
                      


              '</div>';
    //add this to html
       $(this).find("[data-role=content]").html(info_view).listview;
});

var data = [
     /*{"name":"",
        "type":"",
        "area":"",
        "details":" ",
        "img": "",
        "url":"",
        "tel":"",
        "age":null,
        "ambiance":"",
        "hours":"",
        "email": "", 
        "address": ""} , */ {
        
        "name":"Vanity",
        "type":"Night Club",
        "area":"Groenkloof",
        "details":"Sophisticated, unique, and effortlessly stylish, Vanity is the exceptional destination for glittering celebrations ",
        "img": "http://www.vanitypta.co.za/wp-content/uploads/2016/04/event1.jpg",
        "url":"http://www.vanitypta.co.za",
        "tel":"0123461169",
        "age":null,
        "ambiance":"night life",
        "hours":"10PM to late",
        "email": "info@vanitypta.co.za", 
        "address": "22 Groenkloof plaza, 53 george storrar dr & Bronkhorst St, Groenkloof, Pretoria, 0027"} , {
        
        "name":"Presley's",
        "type":"club",
        "area":"Die Wilgers",
        "details":" upper east lifestyle, bringing you new entertainment vibe",
        "img": "https://www.presleys.co.za/images/background/fixed_1.jpg",
        "url":"http://www.presley.co.za",
        "tel":"0128070690",
        "age":null,
        "ambiance":"Full Bar Available, Smoking Area, Dance Floor, Live Entertainment, Free Parking, Club Karaoke Nightlife, Serves Cocktails , Live Music",
        "hours":"7:30 to 4AM",
       // "email": "", 
        "address": "Ernies PI, Die Wilgers, Pretoria, 0041"} , {
        
        "name":"The Blue Room Hatfield ",
        "type":"Restaurant",
        "area":"Hatfield",
        "details":" ",
        "img": "http://www.blueroomhatfield.co.za/wp-content/themes/theme46021/images/logo.png",
        "url":"http://www.blueroomhatfield.co.za/",
        "tel":"012 342 7330",
        "age":null,
        "ambiance":"Breakfast,Full Bar Available,Nightlife, Serves Cocktails",
        "hours":"9 AM to 3 AM  ",
        //"email": "", 
        "address": "1057 Arcadia St, Hatfield,Pretoria, 0083"} ,{
        
        "name":"EastWood",
        "type":"Pub/Casual Dinning",
        "area":"Arcadia",
        "details":" Having been around for almost two decades, Eastwood Tavern has become a 'must-visit-venue' when one finds oneself in Pretoria.",
        "img": "http://www.eastwoods.co.za/Images/Cuts/header.jpg",
        "url":"http://www.eastwoods.co.za/",
        "tel":"012 3440243",
        "age":null,
        "ambiance":"akeaway Available, Full Bar Available ,Outdoor Seating ,Smoking Area, Live Entertainment, Free Parking, Wifi,Nightlife",
        "hours":"10 AM to 2 AM",
        "email": " info@eastwoodstavern.co.za", 
        "address": "391 Corner Eastwoods & Park Street, Arcadia, Near, Hatfield, Pretoria"},{
        
        "name":"RoccoMamas",
        "type":"Restaurant",
        "area":"Kolonnade",
        "details":"We’re about building the best smashburgers, serving mofo wings and getting messy with serious ribs.",
        "img": "http://icecompany.co.za/img/clients/rocomamas-logo-black.jpg",
        "url":"https://www.rocomamas.com/",
        "tel":"012 548 0897",
        "age":null,
        "ambiance":"We’ve got free Wi-Fi to feed your Instagram #foodporn addiction, and we never sleep thanks to our in-store generators",
        "hours":" 8AM to 10PM",
        "email": " troubleshoot@rocomamas.co.za", 
        "address": " 27, Kolonnade Shopping Centre, Zambezi Road, Montana Park, Pretoria, 0159"},{
        
        "name":"club Tennesee",
        "type":"pub",
        "area":"hatfield",
        "details":" ",
        "img": "https://ritzbethesda.pointofrentalcloud.com/img/no_image.gif",
        //"url":"",
        "tel":"083 4414323",
        "age":null,
        "ambiance":"Full Bar Available, Free Parking, Nightlife",
        "hours":"2 PM to 2 AM",
        //"email": "", 
        "address": "526 Jan Shoba Street, Hatfield, Pretoria"},{
        
        "name":"Moloko",
        "type":"club",
        "area":"hatfield",
        "details":" ",
        "img": "http://www.zkhiphani.co.za/wp-content/uploads/2016/09/Moloko.png",
        "url":"molokopretoria.tumblr.com/",
        "tel":"012 362 8888",
        "age":null,
        "ambiance":"Full Bar Available, Live Entertainment, Serves Cocktails, Nightlife ,Live Music ,Free Parking",
        "hours":"10PM to AM",
        "email": "", 
        "address": " 525 Duncan St, Hatfield, Pretoria, 0001"},{
        
        "name":"Joe Public",
        "type":"Bar",
        "area":"hatfield",
        "details":"been around fot decade, providing you with some of the best entertainment",
        "img": "https://ritzbethesda.pointofrentalcloud.com/img/no_image.gif",
       // "url":"",
        "tel":"+27 720279001",
        "age":null,
        "ambiance":"Full Bar Available, Free Parking ,Nightlife",
        "hours":"  11 AM to 2 AM",
        "email": "", 
        "address": "Hatfield Square, Burnett Street, Hatfield, Pretoria"},{
        
        "name":"Europa",
        "type":"club",
        "area":"sunnyside",
        "details":" ",
        "img": "https://pbs.twimg.com/profile_images/862638826786783233/GNFBxzsY.jpg",
        //"url":"",
        "tel":"012 4406230",
        "age":null,
        "ambiance":"Takeaway Available, Full Bar Available, Nightlife,Live Music,Smoking Area,Serves Cocktails",
        "hours":"11 AM to 2 AM",
        "email": "", 
        "address": "113 Esselen Street, Sunnyside, Pretoria"},{
        
        "name":"News Cafe",
        "type":"Bar",
        "area":"Hatfield",
        "details":"News Cafe offers and facilitates a premium entertainment experience for its aspirational customer base by efficiently serving world class food offerings and premier beverage choices in an atmosphere that is contemporary ",
        "img": "http://newscafe.co.za.www118.jnb2.host-h.net/wp-content/uploads/2016/06/logo-blue.png",
        "url":"http://newscafe.co.za.www118.jnb2.host-h.net/wp-content/uploads/2016/06/logo-blue.png",
        "tel":"012 348 2982",
        "age":null,
        "ambiance":"music,chilled vibes",
        "hours":"8AM to 8PM",
        "email": "info@newscafe.co.za", 
        "address": "Glen Manor Ave, Menlyn, Pretoria, 0063"},{
        
        "name":"Priva Lounge",
        "type":"Lounge",
        "area":"Waterkloof",
        "details":"Pretoria's premier fine dining restaurant, live music, champage bar and cigar lounge",
        "img": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSpv6SnrZosn15qmDhRVSj8uGdKarPSc2NTcZdDUXdcPYIJXmg4sQ",
        "url":"http://www.privalounge.com/",
        "tel":"012 3464849",
        "age":null,
        "ambiance":"Full Bar Available, Outdoor Seating, Free Parking",
        "hours":"6 PM to 2 AM",
        "email": "info@privalounge.co.za", 
        "address": "Waterkloof Heights Shopping Centre, 103 Club Avenue, Waterkloof, Pretoria"},{
        
        "name":"Trademarx",
        "type":"Restaurant & Bar",
        "area":"Arcadia",
        "details":" Trademarx is situated in Hatfield on the same premises as Loftus, the home base of the Blue Bulls Rugby Team. This popular get-together spot gives both fans and the sport fanatics a pitstop to replenish their rugby and food craving",
        "img": "http://www.trademarx.co.za/images/yootheme/demo/default/tmxlogo.png",
        "url":"http://www.trademarx.co.za/",
        "tel":"012 0048340",
        "age":null,
        "ambiance":"Full Bar Available Outdoor SeatingPrivate Dining Area AvailableWifiLive EntertainmentCraft BeerWine TastingSports BarServes CocktailsLive Music",
        "hours":"  7 AM to 2 AM",
        "email": " info@trademarx.co.za", 
        "address": "Cnr Lynnwood Road & Kirkness Street - Arcadia, Pretoria"},{
        
        "name":"Jack Friday's",
        "type":"Restaurant",
        "area":"MoreletaPark",
        "details":" ",
        "img": "https://dash.mediaupdate.co.za/story/image/29723/29723.jpg",
       // "url":"",
        "tel":"+27 875503851",
        "age":null,
        "ambiance":"Full Bar AvailableTable booking not availableOutdoor SeatingPrivate Dining Area AvailableWifiLive EntertainmentCorkage Fee ChargedLive Music",
        "hours":"10 AM to 12 Midnight",
        //"email": "", 
        "address": "680 Rubinstein Drive, Moreletapark, Pretoria"},{
        
        "name":"Top Flo",
        "type":"Lounge",
        "area":"Arcadia",
        "details":" ",
        "img": "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTNTXD0bNVfoZTBI5W5Yut5Fwhog1AT8HT8xmDTYmZbLcjd0aNczxt6RIiI",
        "url":"http://topfloprestige.co.za/",
        "tel":"012 3211119",
        "age":null,
        "ambiance":"Takeaway Available, Full Bar Available,Outdoor Seating, Free Parking",
        "hours":"10 AM to 2 AM",
        //"email": "", 
        "address": " 446 Madiba St, Arcadia, Pretoria, 0001"},{
        
        "name":"Cubanna",
        "type":"Bar",
        "area":"Menlyn",
        "details":" Clubby Latino bar chain with a Cuban soundtrack, offering cocktails, cigars and a simple menu.",
        "img": "https://pbs.twimg.com/profile_images/474200493456388097/9IDGYy1K_400x400.jpeg",
        "url":"http://cubana.co.za/",
        "tel":"012 348 4527",
        "age":null,
        "ambiance":"Breakfast, Takeaway Available,Full Bar Available, Nightlife, Free Parking, Outdoor Seating",
        "hours":"8 AM to 12 Midnight",
        "email": "cubana@cubana.co.za", 
        "address": "Menlyn Piazza Shopping Centre, Glen Manor Avenue, Menlyn, Pretoria"},{
        
        "name":"WoodStock urban Pizzeria",
        "type":"Restaurant/Pizzeria",
        "area":"Garsfontein",
        "details":"one of the most adventurous dinning place in the city,lovely, good music,with a good sense of standard",
        "img": "https://s3.amazonaws.com/offer-engine/woodstock-urban-pizzeria-x22378560/merchant_primary_logo_%28retina%29_-_merchant.png",
        "url":"http://woodstockurbanpizzeria.com/",
        "tel":"+27 832669433",
        "age":null,
        "ambiance":"Full Bar Available,Live Music, Free Parking, Smoking Area,Craft BeerServes Cocktails,Outdoor Seating,Live Entertainment",
        "hours":"11 AM to 11 PM",
        //"email": "", 
        "address": "206 Duvernoy Street, Garsfontein, Pretoria"},    {
        
        "name":"Lesi ",
        "type":"Restautrant",
        "area":"Lynwood",
        "details":" home of class,the standard of our service is held to an high level.",
        "img": "https://www.dining-out.co.za/ftp/logo/LeSiPTA2017Logo.gif",
        //"url":"",
        "tel":"012 0048341",
        "age":null,
        "ambiance":"Breakfast, Full Bar Available, Outdoor Seating, Private Dining Area Available,free parking, Luxury Dining, smoking Area, Live Entertainment",
        "hours":"7 AM to 10 PM",
        //"email": "", 
        "address": "5 Darlington Road, Lynnwood, Pretoria 0081"},    {
        
        "name":"Bugati",
        "type":"cafe",
        "area":"Brooklyn",
        "details":"The Bugatti Cafe Brand is an independent home-grown restaurant chain offering a delicious fusion of Classic South African, Continental, Mediterranean, and Indian cuisine. ",
        "img": "http://cafebugatti.co.za/wp-content/uploads/2016/08/BUGATTIFOODSLOGO.png",
        "url":"http://cafebugatti.co.za/",
        "tel":"012 0042695",
        "age":null,
        "ambiance":"Breakfast,Takeaway Available,Full Bar Available, Serves Cocktails,Paid Parking, Wifi",
        "hours":" 7 AM to 10 PM",
       // "email": "", 
        "address": "Brooklyn Mall, Lower Level, Corner Veale & Fehrsen Street, Brooklyn, Pretoria"},    {
        
        "name":"co.fi",
        "type":"casual dining",
        "area":"brooklyn",
        "details":" ",
        "img": "http://www.wininganddining.co.za/gallery/2203-17900-gallery.jpg",
        "url":"http://www.cofi.co.za/",
        "tel":"012 0048171",
        "age":null,
        "ambiance":"Breakfast, Takeaway Available, Full Bar Available,Outdoor Seating,Wifi,Live Music, Free Parking, Vegetarian Friendly, Serves Cocktails",
        "hours":" 9 AM to 11 PM",
        //"email": "", 
        "address": "Brooklyn Mall, 338 Veale St & Fehrsen Street, Brooklyn, Pretoria"},    {
        
        "name":"crawsdaddy",
        "type":"pub",
        "area":"brooklyn",
        "details":"Crawdaddy's - Good Food and Pub Co. For Great Seafood, Steaks and Asian Fusion Foods",
        "img": "http://crawdaddys.co.za/wp-content/uploads/2015/06/crawdaddys_mini_logo1.png",
        "url":"http://crawdaddys.co.za/",
        "tel":"(012) 460 0889",
        "age":null,
        "ambiance":"Takeaway Available,Full Bar Available,Outdoor Seating,Wifi,Nightlife,Craft Beer,Free Parking,Smoking Area,Vegetarian Friendly,Corkage Fee Charged",
        "hours":"11:30 AM to 10:30 PM",
        "email": "info@crawdaddys.co.za", 
        "address": "Corner Middle & Dey Street, Brooklyn, Pretoria"},];

// this will make the list randomly 
data.sort(function(a, b){return Math.random()- 0.4});









//----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
$(document).on("pageinit", "#info-page", function () {


    //set up string for adding <li/>
    var li = "";

    var pathname = window.location.pathname; // Returns path only
    var url = window.location.href;     // Returns full URL

    console.log(pathname);
    console.log(url);
    
    //container for $li to be added
    $.each(data, function (i, data) {
        //add the <li> to "li" variable
        //note the use of += in the variable
        //meaning I'm adding to the existing data. not replacing it.
        //store index value in array as id of the <a> tag
       li  += '<li ><a href="#?id=1" id="' + i + '"  class="info-go" data-transition="flip" style="background:white;font-weight:600;color:black;box-shadw:none" >' + '<img src="'+data.img+'"  width="80" height="80" style="background-color:whites;box-shadow:0px 1px 3px rgba(100,100,100,0.49);border-radius:40px;"/>' + data.name.charAt(0).toUpperCase() + data.name.slice(1) +'</p>'+'<p style="color:grey;margin-top:-5px">'+data.type.toUpperCase()+"  " +data.area.charAt(0).toUpperCase() + data.area.slice(1)+'<p></li>'
    });
 
    //append list to ul
    $("#thelist").append(li).promise().done(function () {
        //wait for append to finish - thats why you use a promise()
        //done() will run after append is done
        //add the click event for the redirection to happen to #details-page
        $(this).on("click", ".info-go", function (e) {
            e.preventDefault();
            //store the information in the next page's data
            $("#details-page").data("info", data[this.id]);
            //change the page # to second page. 
            //Now the URL in the address bar will read index.html#details-page
            //where #details-page is the "id" of the second page
            //we're gonna redirect to that now using changePage() method
            $.mobile.changePage("#details-page");
        });

        //refresh list to enhance its styling.
        $(this).listview("refresh");
    });
});
//use pagebeforeshow
//DONT USE PAGEINIT! 
//the reason is you want this to happen every single time
//pageinit will happen only once
$(document).on("pagebeforeshow", "#details-page", function () {
    //get from data - you put this here when the "a" wa clicked in the previous page
    var data = $(this).data("info");
    //string to put HTML in
    
    var info_view = "";
 info_view += '<div >'
                    
                       +'<div  style="background:white;margin-top:-16px; font-weight:normal;box-shadow:1px 3px 5px 0px rgba(100,100,100,0.49) ;   border-radius:0px; border-top:none !important;" >'
                       +' <ul data-role="listview"  data-filter="true" data-icon="false" data-mini="true" data-input="#filterBasic-input" class="ui-nodisc-icon ui-alt-icon"  >'
                       + '<img src="'+data.img+'" align="middle" atl="" width="80" height="80" style="background-color:white;box-shadow:0px 1px 7px rgba(100,100,100,0.49);border-radius:40px"/>'
                       +" "+data.type+" "+ data.area+'<br>'
                       +'</div>'+'<br>'
                     
                       +'</ul>' 
                        +'<div class="ui-grid-c">'

                       //CALL
                       +'<div class="ui-block-d">'
                       + '<a href="tel:' + data.tel + '" class="ui-btn ui-icon-phone ui-btn-icon-left" style="width:10px;height:25px;border-radius:30px; background:#3b7a57">' + '</a>'+'<br>'
                       +'</div>'
                       //URL
                       +'<div class="ui-block-d">'
                       + '<a href="' +data.url+ '" class="ui-btn ui-icon-info ui-btn-icon-left" style="background-position:center;display:block;width:10px;height:25px;border-radius:30px; background:purple">'+  '</a>'+'<br>'
                       +'</div>'
                       //EMAIL
                       +'<div class="ui-block-d">'
                       + '<a href="mailto:' + data.email + '" class="ui-btn ui-icon-mail ui-btn-icon-left" style="width:10px;height:25px;border-radius:30px; background:blue">'+  '</a>'+'<br>'
                       +'</div>'
                       //Map
                       +'<div class="ui-block-d">'
                       + '<a href="' + data.map + '" class="ui-btn ui-icon-location ui-btn-icon-left" style="width:10px;height:25px;border-radius:30px; background:red">'+  '</a>'+'<br>'
                       +'</div><br>'
                      // DETAILS and DESCRIPTION
                       +'<div class="ui-body" style="background:white;margin:0px 10px ; font-weight:normal;box-shadow:1px 3px 5px 0px rgba(100,100,100,0.49) ;   border-radius:0px; border-top:none !important;" >'
                       +'<p style="opacity:0.7;">' 
                       +'<b>'+data.name.toUpperCase()+'</b>'+ " "+ data.details+'</p>' +'</br></br>'+'</div>'+'</br>'

                         // MORE DETAILS
                       +'<div class="ui-body" style="background:white; font-weight:normal; box-shadow:1px 3px 5px 0px  rgba(100,100,100,0.49) ;   border-radius:0px;  ">'
                       +'<p >'+'<i style="color:purple">'+"Address: "+ '</i>'+data.address+'</p>'
                       +'<p >'+'<i style="color:purple">'+"Type:    "+ '</i>'+data.type.charAt(0).toUpperCase() + data.type.slice(1)+'</p>'
                       +'<p >'+'<i style="color:purple">'+"Ambiance: "+ '</i>'+data.ambiance+'</p>'
                       +'<p >'+'<i style="color:purple">'+"Hours: "+ '</i>'+data.hours+'</p>'
                       +'<p >'+'<i style="color:purple">'+"Age Resctriction: "+ '</i>'+data.age+'</p>'
                       +'<div>'
                      


              '</div>';
    //add this to html
       $(this).find("[data-role=content]").html(info_view).listview;
});
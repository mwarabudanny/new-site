
var data = [
    /*  {
      "name":"",
        "type":"",
        "area":"",
        "details":" ",
        "img": "",
        "url":"",
        "tel":"",
        "age":null,
        "ambiance":"",
        "hours":"",
        "email": "", 
        "address": ""},*/ 
         {
        "name":"Chez Ntemba",
        "type":"club",
        "area":"Cape town",
        "details":" The club strives to enhance and excite the night life and it is renowned for bringing the best in African, and modern music together",
        "img": "https://pbs.twimg.com/profile_images/635803630264786944/KFfrFL9C_400x400.jpg",
        "url":"https://www.chezntemba.com/",
        "tel":"0765281019",
        "age":null,
        "ambiance":"Serves drinks,Takes Reservations, Walk-Ins Welcome, Good For Groups ,Waiter Service",
        "hours":"10:00PM - 4:00AM ",
        "email": "info@chezntemba.com", 
        "address": "4 Buiten StreetCape Town City Centre Cape Town 8000"},    {
        
        "name":"Coco",
        "type":"club",
        "area":"Cape Town",
        "details":"Situated at 70 loop street, the focus at coco is high-end bottle service, excellent customer attention, beautiful clientele and incredible music all set in a sexy and glam environment that has been designed and kitted out by the cou ",
        "img": "http://i1.wp.com/www.zkhiphani.co.za/wp-content/uploads/2016/09/coco.jpg?fit=600%2C243",
        "url":"http://www.cococpt.co.za/",
        "tel":" 072 673 6869",
        "age":null,
        "ambiance":"night life,full bar available,dancers",
        "hours":"10PM to 4AM",
        "email": "info@cococpt.co.za", 
        "address": "70 Loop St, Cape Town City Centre, Cape Town, 8000"},    {
        
        "name":"The Waiting room",
        "type":"Bar",
        "area":" Royale Eatery",
        "details":" A place to go for all moods, live music on the dancefloor or chillin on the roof terrac",
        "img": "http://s1.evcdn.com/images/edpborder500/I0-001/001/253/440-2.jpeg_/the-waiting-room-upstairs-royale-40.jpeg",
        "url":"http://www.royaleeatery.com/",
        "tel":" 021 422 4536",
        "age":null,
        "ambiance":"Walk-Ins Welcome, Good For Groups, Outdoor Seating",
        "hours":"7PM to 2AM",
        "email": "waitingroombookings@gmail.com", 
        "address": "273 Long St, Cape Town City Centre, Cape Town, 8000"}, {
        
        "name":"The Dubliner",
        "type":"Bar",
        "area":"cape town",
        "details":"Beers and comfort food in a buzzing bar with nightly live bands, plus big screens for sports events. ",
        "img": "http://capetown-thedubliner.co.za/wp-content/uploads/2015/10/logo2.png",
        "url":"http://www.dubliner.co.za/",
        "tel":" 021 424 1212",
        "age":null,
        "ambiance":"night life,full bar available",
        "hours":" 11AM to 4AM",
        "email": "info@dubliner.co.za", 
        "address": "251 Long St, Cape Town, 8001"} , {
        
        "name":"BeerHouse",
        "type":"Bar",
        "area":"",
        "details":"Amazing bar with a great vibe. Perfect for a quick beer after work. The menu is quite impressive for a bar and caters to different needs. It's a good place overall  ",
        "img": "http://www.beerhouse.co.za/files/2016/05/bhlogo.png",
        "url":"http://www.beerhouse.co.za/",
        "tel":"021 424 3370",
        "age":null,
        "ambiance":"20 taps and 99 bottles, plus live music, in a spacious beer hall with a balcony and outside terrace.",
        "hours":" 10AM–2AM",
        "email": "onlong@beerhouse.co.za", 
        "address": " 223 Long St, Cape Town City Centre, Cape Town, 8000"} , {
        
        "name":"DecoDance",
        "type":"club",
        "area":"Seapoint",
        "details":" ",
        "img": "https://ritzbethesda.pointofrentalcloud.com/img/no_image.gif",
        "url":"",
        "tel":"021 433 2912",
        "age":null,
        "ambiance":"",
        "hours":"8 : 30PM to 4AM",
        "email": "", 
        "address": " 120 Main Rd, Cape Town, 8005"} , {
        
        "name":"Asoka",
        "type":"Lounge",
        "area":"Seapoint",
        "details":"Victorian townhouse bar with open-roof candlelit courtyard, Asian fusion tapas and cocktails. ",
        "img": "http://cape-town-active.com/wp-content/uploads/2012/04/cape-town-asoka.gif",
        "url":"http://asoka.za.com/",
        "tel":"021 422 0909",
        "age":null,
        "ambiance":"Asoka thrives on the journey of a night – from food to cocktails to late nights under the skyligh",
        "hours":"5PM to 2AM",
        "email": "info@asoka.za.com", 
        "address": "68 Kloof St, Gardens, Cape Town, 8001"} , {
        
        "name":"Zepi Grill and Bar",
        "type":"Bar",
        "area":"Seapoint",
        "details":" Zepi Grill & Bar in Gardens offers a varied menu of delicious and hearty home-style South African and international meals",
        "img": "https://d2qk001qea2413.cloudfront.net/681981528/cms/imagepool/566eaf8c76ab9.png",
        //"url":"",
        "tel":" 021 465 1311",
        "age":null,
        "ambiance":"full bar available,nightlife,grill",
        "hours":"6 : 30AM to 11PM",
        //"email": "", 
        "address": "10 Mill St, Gardens, Cape Town, 8000"} ,{
        
        "name":"Jo'burg",
        "type":"club",
        "area":"Seapoint",
        "details":"an adult entertainment night club situated in the heart of cape town ",
        "img": "https://scontent.fjnb4-1.fna.fbcdn.net/v/t1.0-1/p160x160/12313958_1020950274632917_5203134726652237420_n.jpg?oh=f80849fb634648047d02f21d485e9daa&oe=59CB2F69",
        "url":"http://www.joburg.org.za",
        "tel":"021 422 0142",
        "age":null,
        "ambiance":"nightlife, full bar available, dancers, music,adult entertainment",
        "hours":"5PM to 4AM",
        "email": "", 
        "address": "218 Long St, Cape Town CBD, Cape Town, 8000"},{
        
        "name":"Fork Tapas & Pinchos Bar",
        "type":"Restaurant",
        "area":"Seapoint",
        "details":" Located in Cape Town, we at FORK serve contemporary Pinchos, an evolution of the old and still existing Spanish ways, a spirit of sharing smaller plates of food and a culinary sensation of experiencing different tastes all in the same meal.",
        "img": "http://static1.squarespace.com/static/557551b5e4b0573e634d14dd/t/55755d2fe4b0c6a58c77a4bd/1495630286815/?format=1500w",
        "url":"http://www.fork-restaurants.co.za/",
        "tel":"021 424 6334",
        "age":null,
        "ambiance":"FORK’S CONCEPT IS FOR COOL, YOUNG SIBLINGS AND THE REAL FOODIES OF THIS WORLD AS IT OFFERS ULTIMATE FLEXIBILITY, INFORMAL DINING, BITE-SIZED PORTIONS, REASONABLE PRICES AND THE CHANCE TO SWITCH AT THE TURN OF A HEEL FROM TRADITIONAL TO MODERN CUISINE.",
        "hours":"12PM to 11PM",
        //"email": "", 
        "address": " 84 Long St, Cape Town City Centre, Cape Town, 8000"},{
        
        "name":"Bob's Bar",
        "type":"Bar",
        "area":"Seapoint",
        "details":"Bob's Bar is located in the middle of the world famous Long Street, Cape Town. This is a perfect place to catch daily locals and have a nice legendary chat. Bob's has a unique variety of shooters with an extensive menu currently boasting no less than 83 to choose from ",
        "img": "http://www.wininganddining.co.za/gallery/5168-19039-image.jpg",
        //"url":"",
        "tel":"021 424 3584",
        "age":null,
        "ambiance":"sport bar,nightlife,good music and vibrant environment,beautiful people,full bar available",
        "hours":"7:30AM to 4:30AM",
        "email": "bobsbarcapetown@yahoo.com", 
        "address": " 187 Long St, Cape Town City Centre, Cape Town, 8001"},{
        
        "name":"Outrage of Modesty",
        "type":"Bar",
        "area":"Seapoint",
        "details":" A stylish bouncer with an earpiece is the only sign that you’ve arrived at Outrage of Modesty. If you’ve got a booking, or if there’s space in the 24-seater bar upstairs, he’ll usher you inside into a dark, black stairwell, lit only by neon lettering, that leads up to a beautifully manicured and genuinely tiny bar – and a whole new world of cocktails.",
        "img": "https://anoutrage.com/wp-content/uploads/2017/02/OOM-LOGO_WEBSITE-1.png",
        "url":"https://anoutrage.com/",
        "tel":" 021 422 2902",
        "age":null,
        "ambiance":"food and drinks",
        "hours":" 6PM UNTIL LATE",
        "email": "reservations@anoutrage.com", 
        "address": "88 Shortmarket St, Cape Town City Centre, Cape Town, 8000"},{
        
        "name":"Shimmy Beach club",
        "type":"Restaurant",
        "area":"Greenpoint",
        "details":"Shimmy Beach Club is Cape Town’s premier ocean-front dining and lifestyle venue. When you shimmy down to our spectacular location fronting the harbour with its breathtaking backdrop of Cape Town’s iconic Table Mountain, you’ll discover a destination with endless opportunity for luxury and indulgence",
        "img": "https://pbs.twimg.com/profile_images/816236303129972736/J-EnUJSI.jpg",
        "url":"http://www.shimmybeachclub.com/",
        "tel":"+27 21 200 7778",
        "age":null,
        "ambiance":"Savour our delectable menus, taste our numerous luxury drinks and cocktails, and imbibe the sophisticated environment we’ve created just for you.",
        "hours":" 11:00 to 04:00AM",
        "email": "info@shimmybeachclub.co.za", 
        "address": "12 S Arm Rd, V & A Waterfront, Cape Town, 8002"},{
        
        "name":"CafeCaprice",
        "type":"Restaurant",
        "area":"Camps bay",
        "details":"Café Caprice combines artisan cocktails, a café-style menu, relaxing lounges and sidewalk seating to experience the epitome of Cape Town’s cosmopolitan social scene. Situated directly across from Camps Bay Beach at 37 Victoria Road, open 7 days a week since 1999, it is a home for many Cape Townians and a must visit destination for tourists",
        "img": "http://www.mrcapetown.co.za/wp-content/themes/editorial/functions/thumb.php?src=wp-content/uploads/2010/11/cafe-caprice-logo.jpg&w=606&h=0&zc=1&q=90",
        "url":"http://cafecaprice.co.za/",
        "tel":"021 438 8315",
        "age":null,
        "ambiance":"food and cocktails",
        "hours":"12 : 30 PM to 2AM",
        "email": "info@cafecaprice.co.za", 
        "address": "37 Victoria Road, Camps Bay"},{
        "name":"Mantra cafe",
        "type":"Restaurant",
        "area":"Camps bay",
        "details":"Mantra Cafe and Bar is a fabulous spot for a delicious meal, and drink, promising to provide stunning views of the Camps Bay area ",
        "img": " https://ritzbethesda.pointofrentalcloud.com/img/no_image.gif",
        "url":"https://www.mantracafe.co.za",
        "tel":"(021) 437 0206",
        "age":null,
        "ambiance":"food and cocktails",
        "hours":"8AM UNTIL LATE",
        "email": "campsbay@melissas.co.za", 
        "address": "43 Victoria Road Camps BayCape Town 8001 South Africa"},{
        
        "name":"club 89 on Long",
        "type":"club",
        "area":"Greenpoint",
        "details":" Experience the best local and international acts every week in the Mother City.",
        "img": "https://scontent.fjnb4-1.fna.fbcdn.net/v/t1.0-1/p200x200/18835599_543438962713516_12527587138993399_n.png?oh=640be4f444b4fec8e16314187026fb34&oe=59D44B10",
        //"url":"",
        "tel":"071 163 5991",
        "age":null,
        "ambiance":"nightlife",
        "hours":"9PM to 4AM",
        "email": "club89onlong@gmail.com", 
        "address": " 89 Long St, Cape Town City Centre, Cape Town, 8000"},{
        
        "name":"Saint Champagne Bar & Lounge",
        "type":"Lounge",
        "area":"Zonnebloem",
        "details":"Designed with a smooth, contemporary style, Saint Champagne Bar and Lounge is a place built for pure pleasure. With the exhilaration of the Cape Town night life, this sophisticated sanctuary offers a high energy experience, in the middle of it all – that transcends the notions of a classic upmarket lounge. It boasts a fully stocked bar that embraces seasonality, making this the perfect self-contained space for events. ",
        "img": "http://www.theindustrybar.co.za/wp-content/uploads/2016/12/logosaint.jpg",
        "url":"http://www.saintlounge.co.za/",
        "tel":"073 531 6312",
        "age":null,
        "ambiance":"night life,full bar available,dancers,live entertainment.",
        "hours":"11AM to 2:30AM",
        "email": " info@saintlounge.co.za", 
        "address": "37 Harrington St, Zonnebloem, Cape Town, 8001"},





  ];

// this will make the list randomly 
data.sort(function(a, b){return Math.random()- 0.4});









//----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
$(document).on("pageinit", "#info-page", function () {


    //set up string for adding <li/>
    var li = "";
    
    //container for $li to be added
    $.each(data, function (i, data) {
        //add the <li> to "li" variable
        //note the use of += in the variable
        //meaning I'm adding to the existing data. not replacing it.
        //store index value in array as id of the <a> tag
       li  += '<li ><a href="#" id="' + i + '"  class="info-go" data-transition="flip" style="background:white;font-weight:600;color:#4C4C4C;box-shadw:none" >' + '<img src="'+data.img+'"  width="80" height="80" style="background-color:white;box-shadow:0px 1px 3px rgba(100,100,100,0.49);border-radius:40px;"/>' + data.name.charAt(0).toUpperCase() + data.name.slice(1) +'</p>'+'<p style="color:grey;margin-top:-5px">'+data.type.toUpperCase()+"  " +data.area.charAt(0).toUpperCase() + data.area.slice(1)+'<p></li>'
    });
 
    //append list to ul
    $("#thelist").append(li).promise().done(function () {
        //wait for append to finish - thats why you use a promise()
        //done() will run after append is done
        //add the click event for the redirection to happen to #details-page
        $(this).on("click", ".info-go", function (e) {
            e.preventDefault();
            //store the information in the next page's data
            $("#details-page").data("info", data[this.id]);
            //change the page # to second page. 
            //Now the URL in the address bar will read index.html#details-page
            //where #details-page is the "id" of the second page
            //we're gonna redirect to that now using changePage() method
            $.mobile.changePage("#details-page");
        });

        //refresh list to enhance its styling.
        $(this).listview("refresh");
    });
});
//use pagebeforeshow
//DONT USE PAGEINIT! 
//the reason is you want this to happen every single time
//pageinit will happen only once
$(document).on("pagebeforeshow", "#details-page", function () {
    //get from data - you put this here when the "a" wa clicked in the previous page
    var data = $(this).data("info");
    //string to put HTML in
    
    var info_view = "";
 info_view += '<div >'
                    
                       +'<div  style="background:white;margin-top:-16px; font-weight:normal;box-shadow:1px 3px 5px 0px rgba(100,100,100,0.49) ;   border-radius:0px; border-top:none !important;" >'
                       +' <ul data-role="listview"  data-filter="true" data-icon="false" data-mini="true" data-input="#filterBasic-input" class="ui-nodisc-icon ui-alt-icon"  >'
                       + '<img src="'+data.img+'" align="middle" atl="" width="80" height="80" style="background-color:red;box-shadow:0px 1px 7px rgba(100,100,100,0.49);border-radius:40px"/>'
                       +" "+data.type+" "+ data.area+'<br>'
                       +'</div>'+'<br>'
                     
                       +'</ul>' 
                        +'<div class="ui-grid-c">'

                       //CALL
                       +'<div class="ui-block-d">'
                       + '<a href="tel:' + data.tel + '" class="ui-btn ui-icon-phone ui-btn-icon-left" style="width:10px;height:25px;border-radius:30px; background:#3b7a57">' + '</a>'+'<br>'
                       +'</div>'
                       //URL
                       +'<div class="ui-block-d">'
                       + '<a href="' +data.url+ '" class="ui-btn ui-icon-info ui-btn-icon-left" style="background-position:center;display:block;width:10px;height:25px;border-radius:30px; background:purple">'+  '</a>'+'<br>'
                       +'</div>'
                       //EMAIL
                       +'<div class="ui-block-d">'
                       + '<a href="mailto:' + data.email + '" class="ui-btn ui-icon-mail ui-btn-icon-left" style="width:10px;height:25px;border-radius:30px; background:blue">'+  '</a>'+'<br>'
                       +'</div>'
                       //Map
                       +'<div class="ui-block-d">'
                       + '<a href="' + data.map + '" class="ui-btn ui-icon-location ui-btn-icon-left" style="width:10px;height:25px;border-radius:30px; background:red">'+  '</a>'+'<br>'
                       +'</div><br>'
                      // DETAILS and DESCRIPTION
                       +'<div class="ui-body" style="background:white;margin:0px 10px ; font-weight:normal;box-shadow:1px 3px 5px 0px rgba(100,100,100,0.49) ;   border-radius:0px; border-top:none !important;" >'
                       +'<p style="opacity:0.7;">' 
                       +'<b>'+data.name.toUpperCase()+'</b>'+ " "+ data.details+'</p>' +'</br></br>'+'</div>'+'</br>'

                         // MORE DETAILS
                       +'<div class="ui-body" style="background:white; font-weight:normal; box-shadow:1px 3px 5px 0px  rgba(100,100,100,0.49) ;   border-radius:0px;  ">'
                       +'<p >'+'<i style="color:purple">'+"Address: "+ '</i>'+data.address+'</p>'
                       +'<p >'+'<i style="color:purple">'+"Type:    "+ '</i>'+data.type.charAt(0).toUpperCase() + data.type.slice(1)+'</p>'
                       +'<p >'+'<i style="color:purple">'+"Ambiance: "+ '</i>'+data.ambiance+'</p>'
                       +'<p >'+'<i style="color:purple">'+"Hours: "+ '</i>'+data.hours+'</p>'
                       +'<p >'+'<i style="color:purple">'+"Age Resctriction: "+ '</i>'+data.age+'</p>'
                       +'<div>'
                      


              '</div>';
    //add this to html
       $(this).find("[data-role=content]").html(info_view).listview;
});